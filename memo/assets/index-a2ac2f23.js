import{h as m,o as f,c as p,u as d,k as j,l as h,m as M,a as y,n as v,p as O,r as w}from"./index-27002a3c.js";var T=(e,o)=>{let r;const s=()=>clearTimeout(r);return m()&&f(s),Object.assign((...n)=>{r!==void 0&&s(),r=setTimeout(()=>e(...n),o)},{clear:s})},C=(e,o)=>{let r=!1,s,c;const n=(...t)=>{c=t,!r&&(r=!0,s=setTimeout(()=>{e(...c),r=!1},o))},a=()=>{clearTimeout(s),r=!1};return m()&&f(a),Object.assign(n,{clear:a})},x=()=>{};function z(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function g(e,...o){return typeof e=="function"?e(...o):e}var W=Object.entries,L=Object.keys,R=e=>m()?f(e):e,V=()=>{let e=[];const o=()=>e=[];return{push:(...r)=>e.push(...r),execute(r,s,c,n){e.forEach(a=>a(r,s,c,n)),o()},clear:o}};function D(e){const o={...e},r={},s=new Map,c=t=>{const i=s.get(t);if(i)return i[0]();const u=p(o[t],{name:typeof t=="string"?t:void 0});return s.set(t,u),delete o[t],u[0]()},n=(t,i)=>{const u=s.get(t);if(u)return u[1](i);t in o&&(o[t]=g(i,[o[t]]))};for(const t of L(e))r[t]=void 0,Object.defineProperty(r,t,{get:c.bind(void 0,t)});return[r,(t,i)=>(z(t)?d(()=>{j(()=>{for(const[u,l]of W(g(t,r)))n(u,()=>l)})}):n(t,i),r)]}const P=(e,o)=>e.length>0?()=>e(d(o)):e;function S(e,o){const r=m(),s=new Set;let c=0,n=!1;return f(()=>{for(const a of s)a();s.clear(),n=!0}),a=>{if(n){d(a);return}c++,y(t=>{s.add(t);let i=!0;v(()=>{if(i)return i=!1,a();--c===0&&d(e),t(),s.delete(t)},o)},r)}}function k(e,o){const[r,s]=p(0),c=e.map((n,a)=>h(()=>(s(a),n())));return h(()=>c.map(n=>n())[r()],void 0,o)}function E(e,o,r){let s=()=>o;const[c,n]=p(o),a=h(P(e,()=>s()),o);return[s=k([c,a],r),t=>n(()=>typeof t=="function"?t(d(s)):t).v]}function q(e,o,r,s,c){let n=!0;const[a,t]=p((()=>{let u;return v(O(e,(l,b)=>{n?(u=o(l,b,s),n=!1):i(l,b)})),u})(),c),i=T((u,l)=>{t(()=>o(u,l,a()))},r);return a}function B(e,o,r,s){let c=x;const n=S(()=>c()),[a,t]=p((()=>{let i;return n(()=>i=e(r)),i})(),s);return c=C(()=>n(()=>t(e)),o),a}function G(e,o={}){const[r,s]=p(o.value,o),c=[];return v(async()=>{const n=e(d(r));n instanceof Promise?(c.push(n),n.then(a=>c.includes(n)&&s(()=>a)),n.finally(()=>{const a=c.indexOf(n);c.splice(0,a+1)})):s(()=>n)},void 0),r}function A(e,o,r){const s=m()??void 0;let c=0,n=o,a=!0,t,i,u=!1;f(()=>{i&&i(),u=!0});const l=S(()=>a=!t);return()=>u||!M()?t?t():(a&&(l(()=>n=e(n)),a=!1),n):(c++,f(()=>c--),t||y(b=>{i=b,t=h(()=>c?n=e(n):(i(),i=t=void 0,n),n,r)},s),t())}function H(...e){const o=new Map,r=m(),s=typeof e[1]=="function"?e[0]:void 0,c=typeof e[1]=="function"?e[1]:e[0],n=typeof e[1]=="object"?e[1]:typeof e[2]=="object"?e[2]:{},a=t=>{if(o.has(t))return o.get(t)();const i=w(r,()=>A(u=>c(t,u),void 0,n));return(n.size===void 0||o.size<n.size)&&o.set(t,i),i()};return s?()=>a(s()):a}export{G as a,V as b,A as c,D as d,q as e,B as f,H as g,E as h,R as t};
